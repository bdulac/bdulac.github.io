<!DOCTYPE html>
<html>
<head>
	<link href="http://gmpg.org/xfn/11" rel="profile">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<link rel="canonical" href="http://bdulac.github.io//blog/memory-errors-in-java" />
	<meta name="description" content="Memory in Java is largely made easy by garbage collection. This automatic management of memory does not prevent from any..." />
	<meta name="author" content="Bérenger Dulac">
	<meta property="og:description" content="Memory in Java is largely made easy by garbage collection. This automatic management of memory does not prevent from any..." />
	<meta itemprop="image" content="http://bdulac.github.io//assets/images/home.png" />
	<meta property="og:image" content="http://bdulac.github.io//assets/images/home.png" />
	<meta property="og:title" content="Memory errors in Java" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="http://bdulac.github.io//blog/memory-errors-in-java" />
	<meta property="og:site_name" content="Notes of a Java developer" />
	<title>Memory errors in Java &middot; Notes of a Java developer</title>
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" type="text/css" media="only screen and (min-width: 1001px)" href="/assets/css/desktop.css" />
	<link rel="stylesheet" type="text/css" media="only screen and (max-width: 1000px)" href="/assets/css/mobile.css" />
	<link href="/assets/css/genericons.css" type="text/css" rel="stylesheet" />
	<link href="/assets/css/syntax.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
	<link rel="apple-touch-icon" href="http://bdulac.github.io//assets/images/home.png">
	<link rel="shortcut icon" href="http://bdulac.github.io//assets/images/favicon.ico">
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://bdulac.github.io//atom.xml">
</head>
<body>
	<div id="container" style="background-image: url(/assets/images/cover.png);">
<header  style="height: 150px;">
	
	<label class="menu" for="_1">
	<span class="genericon genericon-menu"></span>
</label>
<input id="_1" type="checkbox">
<div class="menu-content">
	<div class="menu" style="background-color: #777; z-index: -1;"></div>
	
	<a href="/">Home</a><br>
	
	<a href="/about">About</a><br>
	
</div>
<div class="social-links">
	
	<a href="http://facebook.com/berenger.dulac" target="_blank" title="Join me on Facebook"><span class="genericon genericon-facebook"></span></a>
	
	<a href="https://github.com/bdulac" target="_blank" title="Fork me on github"><span class="genericon genericon-github"></span></a>
	
	<a href="http://bdulac.github.io/atom.xml" target="_blank" title="Subscribe to my Atom feed"><span class="genericon genericon-feed"></span></a>
	
	<a href="http://bdulac.github.io/feed.xml" target="_blank" title="Subscribe to my RSS feed"><span class="genericon genericon-feed"></span></a>
	
</div>
	<div id="home-title">
		<a href="http://bdulac.github.io/">
			<img src="/assets/images/home.png" class="site-icon" />
		</a>
		<h1>Notes of a Java developer</h1>
	</div>
</header>
<div id="post-list">
<!--
	<div id="post-info">
		
		<h1>Memory errors in Java</h1>
		
		
		<a class="site-title" href="http://bdulac.github.io/"><img src="/assets/images/home.png" class="site-icon-small">Notes of a Java developer</a>, in 04 January 2014
	</div>
	<div id="nav-icon" style="bottom: 60px;">
		<a class="scroll" data-speed="1000" href="#article"><span class="genericon genericon-expand"></span></a>
	</div>
-->
	<article>
		<header>
			<h1><a href="">Memory errors in Java</a></h1>
		</header>
		<main>
			<div id="article" class="post-content">
				<p>
    Memory in <i>Java</i> is largely made easy by garbage collection. This
    automatic management of memory does not prevent from any memory
    problem. Here are some basics elements I find useful to review while
    facing a memory error.
</p>

<p>
    The memory is divided in two distinct spaces, even if this <a
        href="http://openjdk.java.net/jeps/122">might change in Java 8</a><a
        href="http://www.blogger.com/null">.</a><br />
<ul>
    <li>The PermGen space contains classes definitions</li>
    <li>The Heap space contains objects</li>
</ul>
When a memory problem occurs, an
<a
    href="http://docs.oracle.com/javase/7/docs/api/java/lang/OutOfMemoryError.html">error</a>
is raised. This
<a
    href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html">throwable</a>
contains information about the cause of the problem and the impacted
memory space. Most of time, these informations are sufficient to help
solve the problem.
</p>

<p>
    The JVM options mentioned in this post are for <i>HotSpot</i>
    (Sun/Oracle implementation). For more informations, the <a
        href="http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html">official
        <i>HotSpot</i> tuning documentation
    </a> is very helpful.<br />
    <a
        href="http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/memleaks.html#gbyuu"><br /></a><a
        href="http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/memleaks.html#gbyuu"><u>java.lang.OutOfMemoryError:
            PermGen space</u></a><br />
<ul></ul>
The space allocated for classes definitions is full. This can happen if
the environment loads a large number of classes (common in Java EE
environments). The allocated space can be configured via the JVM option
<i>-XX:PermSize=256m</i>
(for 256 megabytes).
</p>

<p>
    In some situations, this saturation can be caused by a hot deployment.
    A workaround for such a problem is the JVM option&nbsp; <i>-XX:+CMSClassUnloadingEnabled</i>.
    This clear all references to obsolete classes definitions. A very
    helpful option when processing multiple hot deployments in a <i>Tomcat</i>
    environment.
</p>

<p>
    A <a
        href="http://frankkieviet.blogspot.fr/2006/10/classloader-leaks-dreaded-permgen-space.html">blog
        post</a> by Frank Kieviet explains a pattern that could also cause PermGen
    space errors.
</p>

<p>
    <a
        href="http://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/memleaks.html#gbyvh"><u>Message
            java.lang.OutOfMemoryError: Java heap space</u></a>
</p>

<p>The created objects stay in the Heap space while being referenced
    in the executed program. When an object is not referenced any more, it
    becomes available for release by the Garbage Collector (GC). Most of
    time, the GC acts when the available memory becomes low. This is highly
    configurable with many JVM options.</p>
<p>
    If there is no memory leak, the easy solution is to increase the
    available space.<br />All becomes complicated when there is a memory
    leak. The cause can be difficult to identify. Several tools help to
    identify the problem nature.
</p>

<p>
    I personally generate an <i>hprof</i> file with the JVM option <i>-XX:+HeapDumpOnOutOfMemory</i>.
    Another JVM option <i>-XX:HeapDumpPath=...</i> allows to specify the
    generated file location.The <a href="http://www.eclipse.org/mat/">Eclipse
        MAT</a> tools helps to visualize the generated file.
</p>

<p>
    Another solution is to run your program with the Eclipse <a
        href="http://www.eclipse.org/tptp/">TPTP tools</a>. But I prefer to
    avoid this option because it requires much resources to run (and was
    quite unstable the last time I used it).
</p>

<p>
    <a
        href="http://www.oracle.com/technetwork/java/javase/gc-tuning-6-140523.html#cms.oom"><u>Message
            java.lang.OutOfMemoryError: GC limit overhead exceeded</u></a>
</p>

<p>
    This error happens when the system spends too much time executing
    garbage collection. Literally, there is no memory saturation but the
    system uses most of its memory despite garbage collections. A simple
    workaround can be to extend the Heap space. If the problem persists,
    tuning the GC configuration will probably be the solution.
</p>

			</div>
		</main>
		<footer>
			<span class="post-date">04 January 2014</span>
		</footer>
	</article>
</div>
<!--

<footer class="clean">
	<div id="nav-icon" style="top: 25px;">
		<a class="scroll" data-speed="1000" href="#article"><span class="genericon genericon-collapse"></span></a>
	</div>
	<div id="post-info">
		<h3>Featured post</h3>
		<a href="/blog/history-of-computing-information-processing-and-transactions">
			<h1>History of computing: information processing and transactions</h1>
			
		</a>
	</div>
	<p class="copyright">&copy;2014, <a href="https://github.com/bdulac" target="_blank">Bérenger Dulac</a>. <a href="http://creativecommons.org/licenses/by-nc/2.5" target="_blank">Some rights reserved</a>.</p>
</footer>

-->
<footer>
	<p class="copyright">&copy;2014, <a href="https://github.com/bdulac" target="_blank">Bérenger Dulac</a>. <a href="http://creativecommons.org/licenses/by-nc/2.5" target="_blank">Some rights reserved</a>.</p>
</footer>
</div>
<script src="/assets/js/smooth-scroll.js"></script>
</body>
</html>