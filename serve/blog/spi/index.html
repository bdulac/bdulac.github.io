<!DOCTYPE html>
<html>
<head>
	<link href="http://gmpg.org/xfn/11" rel="profile">
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<link rel="canonical" href="http://bdulac.github.io//blog/spi" />
	<meta name="description" content="What are the Service Provider Interfaces (SPI) ? These are important elements of the Java platform. More documentation is available..." />
	<meta name="author" content="Bérenger Dulac">
	<meta property="og:description" content="What are the Service Provider Interfaces (SPI) ? These are important elements of the Java platform. More documentation is available..." />
	<meta itemprop="image" content="http://bdulac.github.io//assets/images/home.png" />
	<meta property="og:image" content="http://bdulac.github.io//assets/images/home.png" />
	<meta property="og:title" content="SPI" />
	<meta property="og:type" content="article" />
	<meta property="og:url" content="http://bdulac.github.io//blog/spi" />
	<meta property="og:site_name" content="Notes of a Java developer" />
	<title>SPI &middot; Notes of a Java developer</title>
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="HandheldFriendly" content="True" />
	<meta name="MobileOptimized" content="320" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<link rel="stylesheet" type="text/css" media="only screen and (min-width: 1001px)" href="/assets/css/desktop.css" />
	<link rel="stylesheet" type="text/css" media="only screen and (max-width: 1000px)" href="/assets/css/mobile.css" />
	<link href="/assets/css/genericons.css" type="text/css" rel="stylesheet" />
	<link href="/assets/css/syntax.css" type="text/css" rel="stylesheet" />
	<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700|PT+Sans:400">
	<link rel="apple-touch-icon" href="http://bdulac.github.io//assets/images/home.png">
	<link rel="shortcut icon" href="http://bdulac.github.io//assets/images/favicon.ico">
	<link rel="alternate" type="application/rss+xml" title="RSS" href="http://bdulac.github.io//atom.xml">
</head>
<body>
	<div id="container" style="background-image: url(/assets/images/cover.png);">
<header  style="height: 150px;">
	
	<label class="menu" for="_1">
	<span class="genericon genericon-menu"></span>
</label>
<input id="_1" type="checkbox">
<div class="menu-content">
	<div class="menu" style="background-color: #777; z-index: -1;"></div>
	
	<a href="/">Home</a><br>
	
	<a href="/about">About</a><br>
	
</div>
<div class="social-links">
	
	<a href="http://facebook.com/berenger.dulac" target="_blank" title="Join me on Facebook"><span class="genericon genericon-facebook"></span></a>
	
	<a href="https://github.com/bdulac" target="_blank" title="Fork me on github"><span class="genericon genericon-github"></span></a>
	
	<a href="http://bdulac.github.io/atom.xml" target="_blank" title="Subscribe to my Atom feed"><span class="genericon genericon-feed"></span></a>
	
	<a href="http://bdulac.github.io/feed.xml" target="_blank" title="Subscribe to my RSS feed"><span class="genericon genericon-feed"></span></a>
	
</div>
	<div id="home-title">
		<a href="http://bdulac.github.io/">
			<img src="/assets/images/home.png" class="site-icon" />
		</a>
		<h1>Notes of a Java developer</h1>
	</div>
</header>
<div id="post-list">
<!--
	<div id="post-info">
		
		<h1>SPI</h1>
		
		
		<a class="site-title" href="http://bdulac.github.io/"><img src="/assets/images/home.png" class="site-icon-small">Notes of a Java developer</a>, in 16 October 2013
	</div>
	<div id="nav-icon" style="bottom: 60px;">
		<a class="scroll" data-speed="1000" href="#article"><span class="genericon genericon-expand"></span></a>
	</div>
-->
	<article>
		<header>
			<h1><a href="">SPI</a></h1>
		</header>
		<main>
			<div id="article" class="post-content">
				<p>
What are the
    <a href="http://en.wikipedia.org/wiki/Service_provider_interface">Service
        Provider Interfaces</a> (SPI) ?
</p>

<p>
    These are important elements of the Java platform. More documentation is
    available in the <a
        href="http://docs.oracle.com/javase/tutorial/sound/SPI-intro.html">official
        tutorial</a>. In a few words, you probably have noticed the Java APIs
    mainly consist in interfaces. The SPI is the mechanism setting up the
    appropriate implementation so that programs don't rely on the
    implementation at compile time.
</p>

<p>
    When an implementation is provided, to associate it to the implemented
    interface, there is one (or more) entry point. For example, the <a
        href="http://en.wikipedia.org/wiki/Java_Persistence_API">JPA</a> API
    has for single point the interface <a
        href="http://docs.oracle.com/javaee/6/api/javax/persistence/spi/PersistenceProvider.html">javax.persistence.spi.PersistenceProvider</a>
    . All other interfaces are available via this one.
</p>

<p>
    If you want to provide a JPA implementation, you first have to code a
    class implementing this interface. Then, a text file named after the
    fully qualified name of the interface should be available to the class
    loader setting up the environment in the <i>META-INF/services</i>
    directory. <br /> This mean, if you are working with <a
        href="http://www.eclipse.org/">Eclipse</a> IDE in a Java SE
    environment with an <i>src</i> source directory : <br />
    <code>src/META-INF/services/javax.persistence.spi.PersistenceProvider</code>
</p>

<p>
    This text file just has to contain the available implementations. If I
    want my own implementation (the provider is
    org.test.jpaimpl.PersistenceProvider) to be available along with <a
        href="http://www.eclipse.org/eclipselink/">EclipseLink</a> (the
    provider is <a
        href="http://www.eclipse.org/eclipselink/api/2.3/org/eclipse/persistence/jpa/PersistenceProvider.html">org.eclipse.persistence.jpa.PersistenceProvider</a>
    ) the file has to contain these two lines :&nbsp;
    <code></code>
</p>

<p>
    <code>org.eclipse.persistence.jpa.PersistenceProvider
        org.test.jpaimpl.PersistenceProvider</code>
</p>

<p>
    For the specific case of JPA, when multiple implementations are found
    by the class loader, the implementation to use can be specified in the
    <i>persistence.xml</i> file, in the <i>provider</i> element of a <i>persistence-unit</i>
    :
<p>
<pre>
    <br /> &lt;persistence version="2.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/persistence" xsi:schemalocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"&gt;<br />  &lt;persistence-unit name="COLLECTIONS" transaction-type="RESOURCE_LOCAL"&gt;<br />       &lt;provider>org.test.jpaimpl.PersistenceProvider&lt;/provider&gt;<br />       ...<br />  &lt;/persistence-unit&gt;<br />&lt;/persistence&gt;<br />
</pre>
</p>

			</div>
		</main>
		<footer>
			<span class="post-date">16 October 2013</span>
		</footer>
	</article>
</div>
<!--

<footer class="clean">
	<div id="nav-icon" style="top: 25px;">
		<a class="scroll" data-speed="1000" href="#article"><span class="genericon genericon-collapse"></span></a>
	</div>
	<div id="post-info">
		<h3>Featured post</h3>
		<a href="/blog/history-of-computing-information-processing-and-transactions">
			<h1>History of computing: information processing and transactions</h1>
			
		</a>
	</div>
	<p class="copyright">&copy;2014, <a href="https://github.com/bdulac" target="_blank">Bérenger Dulac</a>. <a href="http://creativecommons.org/licenses/by-nc/2.5" target="_blank">Some rights reserved</a>.</p>
</footer>

-->
<footer>
	<p class="copyright">&copy;2014, <a href="https://github.com/bdulac" target="_blank">Bérenger Dulac</a>. <a href="http://creativecommons.org/licenses/by-nc/2.5" target="_blank">Some rights reserved</a>.</p>
</footer>
</div>
<script src="/assets/js/smooth-scroll.js"></script>
</body>
</html>